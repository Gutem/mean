"use strict";var app=angular.module("imdb",["ngRoute"]);app.config(["$locationProvider","$routeProvider",function(e,t){e.hashPrefix(""),t.when("/",{templateUrl:"home.html",controller:"MainCtrl"}).when("/movies/:id",{templateUrl:"movies.html",controller:"MoviesCtrl"}).when("/create",{templateUrl:"movies_create.html",controller:"MoviesCreateCtrl"}).when("/movies/:id/edit",{templateUrl:"movies_edit.html",controller:"MoviesEditCtrl"}).otherwise({redirectTo:"/"})}]),app.directive("youtube",function(e){return{restrict:"E",scope:{height:"@",width:"@",videoid:"@"},template:"<div></div>",link:function(t,i,o){var r=document.createElement("script");r.src="https://www.youtube.com/iframe_api";var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l);var n;e.onYouTubeIframeAPIReady=function(){n=new YT.Player(i.children()[0],{height:t.height,width:t.width,videoId:t.videoid})}}}}),app.controller("MainCtrl",["$http","$scope",function(e,t){e.get("http://localhost:3000/movies").then(function(e){t.movies=e.data},function(e){console.log(e)}),t.addPost=function(){t.title&&""!==t.title&&(t.movies.push({title:t.title,upvotes:0}),t.title="")},t.incrementUpvotes=function(e){e.upvotes+=1}}]),app.controller("MoviesCtrl",["$http","$scope","$routeParams",function(e,t,i){e.get("http://localhost:3000/movies/"+[i.id]).then(function(e){t.movie=e.data,t.youtube={height:"480",width:"100%",videoid:t.movie.trailer_url}},function(e){console.log(e)})}]),app.controller("MoviesCreateCtrl",["$http","$location","$scope","$routeParams",function(e,t,i,o){i.createMovie=function(){if(""!==i.movie.title&&""!==i.movie.genre&&""!==i.movie.title_image_url&&""!==i.movie.trailer_url){var o=i.movie.genre.split(", ");e({method:"POST",url:"http://localhost:3000/movies/",data:{title:i.movie.title,genre:o,title_image_url:i.movie.title_image_url,trailer_url:i.movie.trailer_url}}).then(function(e){t.path("/")})}}}]),app.controller("MoviesEditCtrl",["$http","$location","$scope","$routeParams",function(e,t,i,o){i.movie={},e.get("http://localhost:3000/movies/"+[o.id]).then(function(e){i.movie=e.data,i.youtube={height:"100%",width:"100%",videoid:i.movie.trailer_url}},function(e){console.log(e)}),i.updateMovie=function(){if(""!==i.movie.title&&""!==i.movie.genre&&""!==i.movie.title_image_url&&""!==i.movie.trailer_url){var r=i.movie.genre.split(", ");e({method:"PUT",url:"http://localhost:3000/movies/"+[o.id],data:{title:i.movie.title,genre:r,title_image_url:i.movie.title_image_url,trailer_url:i.movie.trailer_url}}).then(function(e){t.path("/movies/"+[o.id])})}}}]);